
#Description: Repacking - item conversion workflow and inventory report configuration

Repacking2.typeId=1
Repacking2.form=repacking/2/viewForm
Repacking2.edit=rp_item_conversion_edit
Repacking2.print=repackingJr/2/pdf
Repacking2.service=eulap.eb.service.RpItemConversionService
Repacking2.oo.parent_to_child=1
Repacking2.flow=1;2
Repacking2.1.statusId=1
Repacking2.1.required=
Repacking2.1.next=2
Repacking2.1.product_code=266
Repacking2.1.module_code=8
Repacking2.2.statusId=8
Repacking2.2.required=1
Repacking2.2.next=0
Repacking2.2.product_code=266
Repacking2.2.module_code=16
Repacking2.sql.inv.entries=1;2
Repacking2.sql.1.inv=SELECT 'ITEM CONVERSION - RM' AS SOURCE, RP.WAREHOUSE_ID, RPI.ITEM_ID, \
	I.STOCK_CODE, I.DESCRIPTION, I.ITEM_CATEGORY_ID, I.UNIT_MEASUREMENT_ID, \
	0 AS IN_QUANTITY, RPI.QUANTITY AS OUT_QUANTITY, 0 AS IN_UNIT_COST, RPI.UNIT_COST AS OUT_UNIT_COST, \
	0 AS IN_TOTAL_COST, (RPI.QUANTITY * COALESCE(RPI.UNIT_COST, 0)) AS OUT_TOTAL_COST, \
	RP.R_DATE AS DATE, RP.CREATED_DATE, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, I.ACTIVE, \
	CONCAT('IC-RM ', RP.R_NUMBER) AS REFERENCE_NUMBER, '' AS INVOICE_NUMBER, 'CONVERTED FROM' AS TRANS_DESCRIPTION, \
	0 AS SRP, RP.EB_OBJECT_ID AS PARENT_EB_OBJECT_ID, RPI.EB_OBJECT_ID AS EB_OBJECT_ID \
	FROM REPACKING_RAW_MATERIAL RPI \
	INNER JOIN REPACKING RP ON RP.REPACKING_ID = RPI.REPACKING_ID \
	INNER JOIN FORM_WORKFLOW FW ON FW.FORM_WORKFLOW_ID = RP.FORM_WORKFLOW_ID \
	INNER JOIN ITEM I ON I.ITEM_ID = RPI.ITEM_ID \
	WHERE RP.REPACKING_TYPE_ID = 2 \
	AND RP.COMPANY_ID = IN_COMPANY_ID
Repacking2.sql.2.inv=SELECT 'ITEM CONVERSION - FG' AS SOURCE, RP.WAREHOUSE_ID, RPI.ITEM_ID, \
	I.STOCK_CODE, I.DESCRIPTION, I.ITEM_CATEGORY_ID, I.UNIT_MEASUREMENT_ID, \
	RPI.QUANTITY AS IN_QUANTITY, 0 AS OUT_QUANTITY, RPI.UNIT_COST AS IN_UNIT_COST, 0 AS OUT_UNIT_COST, \
	(RPI.QUANTITY * COALESCE(RPI.UNIT_COST, 0)) AS IN_TOTAL_COST, 0 AS OUT_TOTAL_COST, \
	RP.R_DATE AS DATE, RP.CREATED_DATE, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, I.ACTIVE, \
	CONCAT('IC-FG ', RP.R_NUMBER) AS REFERENCE_NUMBER, '' AS INVOICE_NUMBER, 'CONVERTED TO' AS TRANS_DESCRIPTION, \
	0 AS SRP, RP.EB_OBJECT_ID AS PARENT_EB_OBJECT_ID, RPI.EB_OBJECT_ID AS EB_OBJECT_ID \
	FROM REPACKING_FINISHED_GOOD RPI \
	INNER JOIN REPACKING RP ON RP.REPACKING_ID = RPI.REPACKING_ID \
	INNER JOIN FORM_WORKFLOW FW ON FW.FORM_WORKFLOW_ID = RP.FORM_WORKFLOW_ID \
	INNER JOIN ITEM I ON I.ITEM_ID = RPI.ITEM_ID \
	WHERE RP.REPACKING_TYPE_ID = 2 \
	AND RP.COMPANY_ID = IN_COMPANY_ID
Repacking2.sql.inv.as=AND FW.IS_COMPLETE = 1 \
	AND RPI.ITEM_ID = IN_ITEM_ID \
	AND RP.WAREHOUSE_ID = IN_WAREHOUSE_ID \
	AND RP.R_DATE <= IN_DATE
Repacking2.sql.inv.rsf=AND FW.IS_COMPLETE = 1 \
	AND ITEM_ID = IN_ITEM_ID \
	AND RP.WAREHOUSE_ID = IN_WAREHOUSE_ID \
	AND RP.R_DATE > IN_DATE
Repacking2.sql.inv.il=AND RP.R_DATE <= IN_DATE \
	AND IF(IN_ITEM_CATEGORY_ID != -1, I.ITEM_CATEGORY_ID = IN_ITEM_CATEGORY_ID, I.ITEM_CATEGORY_ID != 0) \
	AND IF(IN_WAREHOUSE_ID != -1, RP.WAREHOUSE_ID = IN_WAREHOUSE_ID, RP.WAREHOUSE_ID != IN_WAREHOUSE_ID) \
	AND IF(IN_IS_ACTIVE != -1, I.ACTIVE = IN_IS_ACTIVE, I.ACTIVE != IN_IS_ACTIVE ) \
	AND CASE WHEN IN_STATUS = -1 THEN FW.CURRENT_STATUS_ID != 4 WHEN IN_STATUS = 1 THEN FW.IS_COMPLETE = 1 END
Repacking2.sql.inv.sc=AND FW.IS_COMPLETE = 1 \
	AND RPI.ITEM_ID = IN_ITEM_ID \
	AND RP.WAREHOUSE_ID = IN_WAREHOUSE_ID \
	AND RP.R_DATE BETWEEN IN_START_DATE AND IN_END_DATE
Repacking2.sql.inv.ft=AND FW.IS_COMPLETE = 1 \
	AND RPI.ITEM_ID = IN_ITEM_ID \
	AND RP.WAREHOUSE_ID = IN_WAREHOUSE_ID \
	AND RP.R_DATE > IN_AS_OF_DATE