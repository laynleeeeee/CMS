#-- General Ledger configuration.

GeneralLedger.typeId=1
GeneralLedger.form=generalLedger/journalEntries/form/viewForm
GeneralLedger.edit=general_ledger_edit
GeneralLedger.print=glFormPDF/pdf
GeneralLedger.service=eulap.eb.service.GeneralLedgerService
GeneralLedger.oo.parent_to_child=1
GeneralLedger.oo.child_to_child=9
GeneralLedger.flow=1;2
GeneralLedger.1.statusId=1
GeneralLedger.1.required=
GeneralLedger.1.next=2
GeneralLedger.1.product_code=8
GeneralLedger.1.module_code=8
GeneralLedger.2.statusId=6
GeneralLedger.2.required=1
GeneralLedger.2.next=0
GeneralLedger.2.product_code=8
GeneralLedger.2.module_code=16
#GeneralLedger.sql.entries=1;2
#-- General Journal - Debit
GeneralLedger.sql.1.je=SELECT 'GENERAL LEDGER' as SOURCE, GL.GENERAL_LEDGER_ID as ID, AC.COMPANY_ID, AC.DIVISION_ID, AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, \
	A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, GL.GL_DATE, CONCAT('JV', GL.SEQUENCE_NO) as REFERENCE_NUMBER, GLE.DESCRIPTION, GLE.AMOUNT as DEBIT, 0 as CREDIT, \
	FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM GL_ENTRY GLE \
	INNER JOIN GENERAL_LEDGER GL ON GL.GENERAL_LEDGER_ID = GLE.GENERAL_LEDGER_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = GLE.ACCOUNT_COMBINATION_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN FORM_WORKFLOW FW ON GL.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IS_DEBIT = 1 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
#-- General Journal - Credit
GeneralLedger.sql.2.je=SELECT 'GENERAL LEDGER' as SOURCE, GL.GENERAL_LEDGER_ID as ID, AC.COMPANY_ID, AC.DIVISION_ID, AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, \
	A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, GL.GL_DATE, CONCAT('JV', GL.SEQUENCE_NO) as REFERENCE_NUMBER, GLE.DESCRIPTION, 0 as DEBIT, GLE.AMOUNT as CREDIT, \
	FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM GL_ENTRY GLE \
	INNER JOIN GENERAL_LEDGER GL ON GL.GENERAL_LEDGER_ID = GLE.GENERAL_LEDGER_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = GLE.ACCOUNT_COMBINATION_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN FORM_WORKFLOW FW ON GL.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IS_DEBIT = 0 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
GeneralLedger.sql.je.jerr=AND GL.GL_DATE BETWEEN DATE_FROM AND DATE_TO \
	AND (CASE WHEN IN_REFERENCE_NUMBER NOT LIKE '-1' THEN CONCAT('JV', GL.SEQUENCE_NO) like IN_REFERENCE_NUMBER \
		ELSE IN_REFERENCE_NUMBER like IN_REFERENCE_NUMBER END) \
	AND (CASE IN_SOURCE WHEN 'GENERAL LEDGER' THEN GL.GENERAL_LEDGER_ID != 0 \
		WHEN 'ALL' THEN GL.GENERAL_LEDGER_ID != 0 \
		ELSE GL.GENERAL_LEDGER_ID = 0 END) \
	AND (CASE WHEN IN_IS_POSTED != -1 THEN FW.IS_COMPLETE = IN_IS_POSTED ELSE FW.IS_COMPLETE != IN_IS_POSTED END)
GeneralLedger.sql.je.ab=AND GL.GL_DATE <= IN_AS_OF_DATE \
	AND FW.IS_COMPLETE = 1
GeneralLedger.sql.je.aa=AND D.NUMBER BETWEEN IN_FROM_DIVISION AND IN_TO_DIVISION \
	AND AC.ACCOUNT_ID = IN_ACCOUNT_ID \
	AND GL.GL_DATE BETWEEN DATE_FROM AND DATE_TO \
	AND GLE.DESCRIPTION LIKE IN_DESCRIPTION \
	AND FW.IS_COMPLETE = 1
GeneralLedger.sql.je.gll=AND AC.ACCOUNT_ID = IN_ACCOUNT_ID \
	AND GL.GL_DATE BETWEEN DATE_FROM AND DATE_TO \
	AND FW.IS_COMPLETE = 1
# Configuration for IS and BS by division
GeneralLedger.sql.1.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	GLE.AMOUNT as DEBIT, 0 as CREDIT, AT.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, GL.GL_DATE AS DATE \
	FROM GL_ENTRY GLE \
	INNER JOIN GENERAL_LEDGER GL ON GL.GENERAL_LEDGER_ID = GLE.GENERAL_LEDGER_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = GLE.ACCOUNT_COMBINATION_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN ACCOUNT_TYPE AT ON AT.ACCOUNT_TYPE_ID = A.ACCOUNT_TYPE_ID \
	INNER JOIN FORM_WORKFLOW FW ON GL.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IS_DEBIT = 1 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
#-- General Journal - Credit
GeneralLedger.sql.2.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	0 as DEBIT, GLE.AMOUNT as CREDIT, AT.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, GL.GL_DATE AS DATE \
	FROM GL_ENTRY GLE \
	INNER JOIN GENERAL_LEDGER GL ON GL.GENERAL_LEDGER_ID = GLE.GENERAL_LEDGER_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = GLE.ACCOUNT_COMBINATION_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN ACCOUNT_TYPE AT ON AT.ACCOUNT_TYPE_ID = A.ACCOUNT_TYPE_ID \
	INNER JOIN FORM_WORKFLOW FW ON GL.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IS_DEBIT = 0 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
GeneralLedger.sql.bs=AND GL.GL_DATE <= IN_AS_OF_DATE \
	AND FW.IS_COMPLETE = 1
GeneralLedger.sql.is=AND GL.GL_DATE BETWEEN IN_DATE_FROM AND IN_DATE_TO \
	AND FW.IS_COMPLETE = 1
