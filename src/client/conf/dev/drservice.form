
#Description: Delivery Receipt - Service form workflow and report configuration file

DeliveryReceipt4.typeId=1
DeliveryReceipt4.form=deliveryReceipt/4/view
DeliveryReceipt4.edit=dr_service_edit
DeliveryReceipt4.print=deliveryReceipt/4/pdf
DeliveryReceipt4.service=eulap.eb.service.DeliveryReceiptService
DeliveryReceipt4.oo.parent_to_child=1
DeliveryReceipt4.oo.child_to_child=12012
DeliveryReceipt4.flow=1;2
DeliveryReceipt4.1.statusId=9
DeliveryReceipt4.1.required=
DeliveryReceipt4.1.next=2
DeliveryReceipt4.1.product_code=12009
DeliveryReceipt4.1.module_code=8
DeliveryReceipt4.2.statusId=3
DeliveryReceipt4.2.required=1
DeliveryReceipt4.2.next=0
DeliveryReceipt4.2.product_code=12009
DeliveryReceipt4.2.module_code=16
DeliveryReceipt4.sql.entries=1;2
DeliveryReceipt4.sql.1.je=SELECT 'DELIVERY RECEIPT - SERVICE' as SOURCE, DR.DELIVERY_RECEIPT_ID as ID, C.COMPANY_ID, AC.DIVISION_ID, AC.ACCOUNT_ID, \
	D.NUMBER as DIVISION_NO, D.NAME as DIVISION_NAME, A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, DR.DATE as GL_DATE, \
	CONCAT('DR ', DR.SEQUENCE_NO) as REFERENCE_NUMBER, DR.REMARKS as DESCRIPTION, COALESCE(WSI.UNIT_COST, 0) * WSI.QUANTITY as DEBIT, \
	0 as CREDIT, FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM WITHDRAWAL_SLIP_ITEM WSI \
	INNER JOIN OBJECT_TO_OBJECT OTO1 ON OTO1.TO_OBJECT_ID = WSI.EB_OBJECT_ID \
	INNER JOIN OBJECT_TO_OBJECT OTO2 ON OTO2.TO_OBJECT_ID = OTO1.FROM_OBJECT_ID \
	INNER JOIN REQUISITION_FORM RF ON RF.EB_OBJECT_ID = OTO2.FROM_OBJECT_ID \
	INNER JOIN WORK_ORDER WO ON WO.WORK_ORDER_ID = RF.WORK_ORDER_ID \
	INNER JOIN SALES_ORDER SO ON SO.SALES_ORDER_ID = WO.SALES_ORDER_ID \
	INNER JOIN AUTHORITY_TO_WITHDRAW ATW ON ATW.SALES_ORDER_ID = SO.SALES_ORDER_ID \
	INNER JOIN DELIVERY_RECEIPT DR ON DR.AUTHORITY_TO_WITHDRAW_ID = ATW.AUTHORITY_TO_WITHDRAW_ID \
	INNER JOIN FORM_WORKFLOW FW ON FW.FORM_WORKFLOW_ID = DR.FORM_WORKFLOW_ID \
	INNER JOIN COMPANY C ON C.COMPANY_ID = DR.COMPANY_ID \
	INNER JOIN ITEM I ON I.ITEM_ID = WSI.ITEM_ID \
	INNER JOIN ITEM_CATEGORY_ACCOUNT_SETUP ICAS ON ICAS.ITEM_CATEGORY_ID = I.ITEM_CATEGORY_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON (AC.COMPANY_ID = DR.COMPANY_ID AND AC.ACCOUNT_COMBINATION_ID = ICAS.COST_ACCOUNT) \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	WHERE WSI.ACTIVE = 1  \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND OTO1.OR_TYPE_ID = 1 \
	AND OTO2.OR_TYPE_ID = 3001 \
	AND DR.DELIVERY_RECEIPT_TYPE_ID = 4 \
	AND DR.COMPANY_ID = IN_COMPANY_ID
DeliveryReceipt4.sql.2.je=SELECT 'DELIVERY RECEIPT - SERVICE' as SOURCE, DR.DELIVERY_RECEIPT_ID as ID, C.COMPANY_ID, AC.DIVISION_ID, AC.ACCOUNT_ID, \
	D.NUMBER as DIVISION_NO, D.NAME as DIVISION_NAME, A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, DR.DATE as GL_DATE, \
	CONCAT('DR ', DR.SEQUENCE_NO) as REFERENCE_NUMBER, DR.REMARKS as DESCRIPTION, 0 as DEBIT, \
	COALESCE(WSI.UNIT_COST, 0) * WSI.QUANTITY as CREDIT, FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM WITHDRAWAL_SLIP_ITEM WSI \
	INNER JOIN OBJECT_TO_OBJECT OTO1 ON OTO1.TO_OBJECT_ID = WSI.EB_OBJECT_ID \
	INNER JOIN OBJECT_TO_OBJECT OTO2 ON OTO2.TO_OBJECT_ID = OTO1.FROM_OBJECT_ID \
	INNER JOIN REQUISITION_FORM RF ON RF.EB_OBJECT_ID = OTO2.FROM_OBJECT_ID \
	INNER JOIN WORK_ORDER WO ON WO.WORK_ORDER_ID = RF.WORK_ORDER_ID \
	INNER JOIN SALES_ORDER SO ON SO.SALES_ORDER_ID = WO.SALES_ORDER_ID \
	INNER JOIN AUTHORITY_TO_WITHDRAW ATW ON ATW.SALES_ORDER_ID = SO.SALES_ORDER_ID \
	INNER JOIN DELIVERY_RECEIPT DR ON DR.AUTHORITY_TO_WITHDRAW_ID = ATW.AUTHORITY_TO_WITHDRAW_ID \
	INNER JOIN FORM_WORKFLOW FW ON FW.FORM_WORKFLOW_ID = DR.FORM_WORKFLOW_ID \
	INNER JOIN COMPANY C ON C.COMPANY_ID = DR.COMPANY_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.COMPANY_ID = DR.COMPANY_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	WHERE WSI.ACTIVE = 1 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.ACCOUNT_ID = 56 \
	AND OTO1.OR_TYPE_ID = 1 \
	AND OTO2.OR_TYPE_ID = 3001 \
	AND DR.DELIVERY_RECEIPT_TYPE_ID = 4
DeliveryReceipt4.sql.je.jerr=AND DR.DATE BETWEEN DATE_FROM AND DATE_TO \
	AND (CASE WHEN IN_REFERENCE_NUMBER NOT LIKE '-1' THEN CONCAT('DR', DR.SEQUENCE_NO) LIKE IN_REFERENCE_NUMBER \
		ELSE IN_REFERENCE_NUMBER LIKE IN_REFERENCE_NUMBER END) \
	AND (CASE IN_SOURCE WHEN 'DELIVERY RECEIPT - SERVICE' THEN DR.DELIVERY_RECEIPT_ID != 0 \
		WHEN 'ALL' THEN DR.DELIVERY_RECEIPT_ID != 0 ELSE DR.DELIVERY_RECEIPT_ID = 0 END) \
	AND (CASE WHEN IN_IS_POSTED != -1 THEN FW.IS_COMPLETE = IN_IS_POSTED ELSE FW.IS_COMPLETE != IN_IS_POSTED END)
DeliveryReceipt4.sql.je.ab=AND DR.DATE <= IN_AS_OF_DATE \
	AND FW.IS_COMPLETE = 1
DeliveryReceipt4.sql.je.aa=AND D.NUMBER BETWEEN IN_FROM_DIVISION AND IN_TO_DIVISION \
	AND AC.ACCOUNT_ID = IN_ACCOUNT_ID \
	AND DR.DATE BETWEEN DATE_FROM AND DATE_TO \
	AND DR.REMARKS LIKE IN_DESCRIPTION \
	AND FW.IS_COMPLETE = 1
DeliveryReceipt4.sql.je.gll=AND AC.ACCOUNT_ID = IN_ACCOUNT_ID \
	AND DR.DATE BETWEEN DATE_FROM AND DATE_TO \
	AND FW.IS_COMPLETE = 1