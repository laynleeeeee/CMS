
# Description	: AP Invoice - Item form workflow and report configuration

APInvoice29.typeId=1
APInvoice29.form=apInvoiceGS/view
APInvoice29.edit=ap_invoice_gs_nsb8_edit
APInvoice29.print=apInvoiceGS/print
APInvoice29.service=eulap.eb.service.ApInvoiceGsService
APInvoice29.acct_transaction_types=2
APInvoice29.oo.parent_to_child=1
APInvoice29.oo.child_to_child=24003
APInvoice29.flow=1;2
APInvoice29.1.statusId=1
APInvoice29.1.required=
APInvoice29.1.next=2
APInvoice29.1.product_code=24032
APInvoice29.1.module_code=8
APInvoice29.2.statusId=30
APInvoice29.2.required=1
APInvoice29.2.next=0
APInvoice29.2.product_code=24032
APInvoice29.2.module_code=16
APInvoice29.sql.entries=1;2;3;4;5;6;7;8;9;10;11
APInvoice29.sql.1.je=SELECT 'AP INVOICE GOODS/SERVICES - NSB 8' AS SOURCE, AI.AP_INVOICE_ID AS ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER AS ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('API G/S ', AI.SEQUENCE_NO) AS REFERENCE_NUMBER, AI.DESCRIPTION, IG.AMOUNT + COALESCE(IG.DISCOUNT, 0) AS DEBIT, \
	0 AS CREDIT, FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE AS IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE_GOODS IG \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = IG.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE FW.CURRENT_STATUS_ID != 4 \
	AND IG.UNIT_COST != 0 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.2.je=SELECT 'AP INVOICE GOODS/SERVICES - NSB 8' AS SOURCE, AI.AP_INVOICE_ID AS ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER AS ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('API G/S ', AI.SEQUENCE_NO) AS REFERENCE_NUMBER, AI.DESCRIPTION, IG.AMOUNT + COALESCE(IG.DISCOUNT, 0) AS DEBIT, \
	0 AS CREDIT, FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE AS IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE_LINE IG \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = IG.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE FW.CURRENT_STATUS_ID != 4 \
	AND IG.AMOUNT != 0 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.3.je=SELECT 'AP INVOICE GOODS/SERVICES - NSB 8' AS SOURCE, AI.AP_INVOICE_ID AS ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER AS ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('API G/S ', AI.SEQUENCE_NO) AS REFERENCE_NUMBER, AI.DESCRIPTION, IG.AMOUNT + COALESCE(IG.DISCOUNT, 0) AS DEBIT, \
	0 AS CREDIT, FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE AS IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM SERIAL_ITEM IG \
	INNER JOIN OBJECT_TO_OBJECT OTO ON OTO.TO_OBJECT_ID = IG.EB_OBJECT_ID \
	INNER JOIN AP_INVOICE AI ON AI.EB_OBJECT_ID = OTO.FROM_OBJECT_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.ACTIVE = 1 \
	AND OTO.OR_TYPE_ID = 24001 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND IG.UNIT_COST != 0 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.4.je=SELECT 'AP INVOICE GOODS/SERVICES - NSB 8' AS SOURCE, AI.AP_INVOICE_ID AS ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER AS ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('API G/S ', AI.SEQUENCE_NO) AS REFERENCE_NUMBER, AI.DESCRIPTION, COALESCE(IG.VAT_AMOUNT, 0) AS DEBIT, \
	0 AS CREDIT, FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE AS IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE_GOODS IG \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = IG.AP_INVOICE_ID \
	INNER JOIN VAT_ACCOUNT_SETUP VAS ON (VAS.COMPANY_ID = AI.COMPANY_ID AND VAS.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = VAS.INPUT_VAT_AC_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.VAT_AMOUNT IS NOT NULL \
	AND VAS.TAX_TYPE_ID = IG.TAX_TYPE_ID \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.5.je=SELECT 'AP INVOICE GOODS/SERVICES - NSB 8' AS SOURCE, AI.AP_INVOICE_ID AS ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER AS ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('API G/S ', AI.SEQUENCE_NO) AS REFERENCE_NUMBER, AI.DESCRIPTION, COALESCE(IG.VAT_AMOUNT, 0) AS DEBIT, \
	0 AS CREDIT, FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE AS IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE_LINE IG \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = IG.AP_INVOICE_ID \
	INNER JOIN VAT_ACCOUNT_SETUP VAS ON (VAS.COMPANY_ID = AI.COMPANY_ID AND VAS.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = VAS.INPUT_VAT_AC_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.VAT_AMOUNT IS NOT NULL \
	AND VAS.TAX_TYPE_ID = IG.TAX_TYPE_ID \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.6.je=SELECT 'AP INVOICE GOODS/SERVICES - NSB 8' AS SOURCE, AI.AP_INVOICE_ID AS ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER AS ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('API G/S ', AI.SEQUENCE_NO) AS REFERENCE_NUMBER, AI.DESCRIPTION, COALESCE(IG.VAT_AMOUNT, 0) AS DEBIT, \
	0 AS CREDIT, FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE AS IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM SERIAL_ITEM IG \
	INNER JOIN OBJECT_TO_OBJECT OTO ON OTO.TO_OBJECT_ID = IG.EB_OBJECT_ID \
	INNER JOIN AP_INVOICE AI ON AI.EB_OBJECT_ID = OTO.FROM_OBJECT_ID \
	INNER JOIN VAT_ACCOUNT_SETUP VAS ON (VAS.COMPANY_ID = AI.COMPANY_ID AND VAS.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = VAS.INPUT_VAT_AC_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.VAT_AMOUNT IS NOT NULL \
	AND VAS.TAX_TYPE_ID = IG.TAX_TYPE_ID \
	AND OTO.OR_TYPE_ID = 24001 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.7.je=SELECT 'AP INVOICE GOODS/SERVICES - NSB 8' as SOURCE, AI.AP_INVOICE_ID as ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('API G/S ', AI.SEQUENCE_NO) as REFERENCE_NUMBER, AI.DESCRIPTION, 0 as DEBIT, AI.AMOUNT as CREDIT, \
	FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE AI \
	INNER JOIN SUPPLIER_ACCOUNT SA ON SA.SUPPLIER_ACCOUNT_ID = AI.SUPPLIER_ACCOUNT_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = SA.DEFAULT_CREDIT_AC_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.8.je=SELECT 'AP INVOICE GOODS/SERVICES - NSB 8' as SOURCE, AI.AP_INVOICE_ID as ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('API G/S ', AI.SEQUENCE_NO) as REFERENCE_NUMBER, AI.DESCRIPTION, 0 AS DEBIT, AI.WT_AMOUNT as CREDIT, FW.FORM_WORKFLOW_ID, \
	FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE AI \
	INNER JOIN WT_ACCOUNT_SETTING WTAS ON WTAS.WT_ACCOUNT_SETTING_ID = AI.WT_ACCOUNT_SETTING_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = WTAS.ACCOUNT_COMBINATION_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE AI.WT_ACCOUNT_SETTING_ID IS NOT NULL \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.9.je=SELECT 'AP INVOICE GOODS/SERVICES - NSB 8' AS SOURCE, AI.AP_INVOICE_ID AS ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER AS ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('API G/S ', AI.SEQUENCE_NO) AS REFERENCE_NUMBER, AI.DESCRIPTION, 0 AS DEBIT, COALESCE(IG.DISCOUNT, 0) AS CREDIT, \
	FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE AS IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE_GOODS IG \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = IG.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.DISCOUNT_AC_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.DISCOUNT IS NOT NULL \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.10.je=SELECT 'AP INVOICE GOODS/SERVICES - NSB 8' AS SOURCE, AI.AP_INVOICE_ID AS ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER AS ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('API G/S ', AI.SEQUENCE_NO) AS REFERENCE_NUMBER, AI.DESCRIPTION, 0 AS DEBIT, COALESCE(IG.DISCOUNT, 0) AS CREDIT, \
	FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE AS IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE_LINE IG \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = IG.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.DISCOUNT_AC_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.DISCOUNT IS NOT NULL \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.11.je=SELECT 'AP INVOICE GOODS/SERVICES - NSB 8' AS SOURCE, AI.AP_INVOICE_ID AS ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER AS ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('API G/S ', AI.SEQUENCE_NO) AS REFERENCE_NUMBER, AI.DESCRIPTION, 0 AS DEBIT, COALESCE(IG.DISCOUNT, 0) AS CREDIT, \
	FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE AS IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM SERIAL_ITEM IG \
	INNER JOIN OBJECT_TO_OBJECT OTO ON OTO.TO_OBJECT_ID = IG.EB_OBJECT_ID \
	INNER JOIN AP_INVOICE AI ON AI.EB_OBJECT_ID = OTO.FROM_OBJECT_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.DISCOUNT_AC_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.DISCOUNT IS NOT NULL \
	AND IG.ACTIVE = 1 \
	AND OTO.OR_TYPE_ID = 24001 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.je.jerr=AND AI.GL_DATE BETWEEN DATE_FROM AND DATE_TO \
	AND (CASE WHEN IN_REFERENCE_NUMBER NOT LIKE '-1' THEN CONCAT('API G/S ', AI.SEQUENCE_NO) LIKE IN_REFERENCE_NUMBER \
		ELSE IN_REFERENCE_NUMBER LIKE IN_REFERENCE_NUMBER END) \
	AND (CASE IN_SOURCE WHEN 'AP INVOICE GOODS/SERVICES - NSB 8' THEN AI.AP_INVOICE_ID != 0 \
		WHEN 'ALL' THEN AI.AP_INVOICE_ID != 0 ELSE AI.AP_INVOICE_ID = 0 END) \
	AND (CASE WHEN IN_IS_POSTED != -1 THEN FW.IS_COMPLETE = IN_IS_POSTED ELSE FW.IS_COMPLETE != IN_IS_POSTED END)
APInvoice29.sql.je.ab=AND IF(DATE_FROM IS NOT NULL, AI.GL_DATE BETWEEN DATE_FROM AND DATE_TO, AI.GL_DATE <= DATE_TO) \
	AND IF(IN_DIVISION_ID != -1, AI.DIVISION_ID = IN_DIVISION_ID, AI.DIVISION_ID != IN_DIVISION_ID) \
	AND FW.IS_COMPLETE = 1
APInvoice29.sql.je.aa=AND D.NUMBER BETWEEN IN_FROM_DIVISION AND IN_TO_DIVISION \
	AND AC.ACCOUNT_ID = IN_ACCOUNT_ID \
	AND AI.GL_DATE BETWEEN DATE_FROM AND DATE_TO \
	AND FW.IS_COMPLETE = 1
# Configuration for IS and BS by division
APInvoice29.sql.1.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	IG.AMOUNT + COALESCE(IG.DISCOUNT, 0) AS DEBIT, 0 as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM AP_INVOICE_GOODS IG \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = IG.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND IG.UNIT_COST != 0 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.2.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	IG.AMOUNT + COALESCE(IG.DISCOUNT, 0) AS DEBIT, 0 as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM AP_INVOICE_LINE IG \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = IG.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE FW.CURRENT_STATUS_ID != 4 \
	AND IG.AMOUNT != 0 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.3.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	IG.AMOUNT + COALESCE(IG.DISCOUNT, 0) AS DEBIT, 0 as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM SERIAL_ITEM IG \
	INNER JOIN OBJECT_TO_OBJECT OTO ON OTO.TO_OBJECT_ID = IG.EB_OBJECT_ID \
	INNER JOIN AP_INVOICE AI ON AI.EB_OBJECT_ID = OTO.FROM_OBJECT_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.ACTIVE = 1 \
	AND OTO.OR_TYPE_ID = 24001 \
	AND IG.UNIT_COST != 0 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.4.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	COALESCE(IG.VAT_AMOUNT, 0) AS DEBIT, 0 as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM AP_INVOICE_GOODS IG \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = IG.AP_INVOICE_ID \
	INNER JOIN VAT_ACCOUNT_SETUP VAS ON (VAS.COMPANY_ID = AI.COMPANY_ID AND VAS.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = VAS.INPUT_VAT_AC_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.VAT_AMOUNT IS NOT NULL \
	AND VAS.TAX_TYPE_ID = IG.TAX_TYPE_ID \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.5.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	COALESCE(IG.VAT_AMOUNT, 0) AS DEBIT, 0 as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM AP_INVOICE_LINE IG \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = IG.AP_INVOICE_ID \
	INNER JOIN VAT_ACCOUNT_SETUP VAS ON (VAS.COMPANY_ID = AI.COMPANY_ID AND VAS.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = VAS.INPUT_VAT_AC_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.VAT_AMOUNT IS NOT NULL \
	AND VAS.TAX_TYPE_ID = IG.TAX_TYPE_ID \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.6.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	COALESCE(IG.VAT_AMOUNT, 0) AS DEBIT, 0 as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM SERIAL_ITEM IG \
	INNER JOIN OBJECT_TO_OBJECT OTO ON OTO.TO_OBJECT_ID = IG.EB_OBJECT_ID \
	INNER JOIN AP_INVOICE AI ON AI.EB_OBJECT_ID = OTO.FROM_OBJECT_ID \
	INNER JOIN VAT_ACCOUNT_SETUP VAS ON (VAS.COMPANY_ID = AI.COMPANY_ID AND VAS.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = VAS.INPUT_VAT_AC_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.VAT_AMOUNT IS NOT NULL \
	AND VAS.TAX_TYPE_ID = IG.TAX_TYPE_ID \
	AND OTO.OR_TYPE_ID = 24001 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.7.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	0 AS DEBIT, AI.AMOUNT as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM AP_INVOICE AI \
	INNER JOIN SUPPLIER_ACCOUNT SA ON SA.SUPPLIER_ACCOUNT_ID = AI.SUPPLIER_ACCOUNT_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = SA.DEFAULT_CREDIT_AC_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.8.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	0 AS DEBIT, AI.WT_AMOUNT as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM AP_INVOICE AI \
	INNER JOIN WT_ACCOUNT_SETTING WTAS ON WTAS.WT_ACCOUNT_SETTING_ID = AI.WT_ACCOUNT_SETTING_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = WTAS.ACCOUNT_COMBINATION_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE AI.WT_ACCOUNT_SETTING_ID IS NOT NULL \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.9.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	0 AS DEBIT, COALESCE(IG.DISCOUNT, 0) as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM AP_INVOICE_GOODS IG \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = IG.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.DISCOUNT_AC_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.DISCOUNT IS NOT NULL \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.10.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	0 AS DEBIT, COALESCE(IG.DISCOUNT, 0) as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM AP_INVOICE_LINE IG \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = IG.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.DISCOUNT_AC_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.DISCOUNT IS NOT NULL \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.11.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	0 AS DEBIT, COALESCE(IG.DISCOUNT, 0) as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM SERIAL_ITEM IG \
	INNER JOIN OBJECT_TO_OBJECT OTO ON OTO.TO_OBJECT_ID = IG.EB_OBJECT_ID \
	INNER JOIN AP_INVOICE AI ON AI.EB_OBJECT_ID = OTO.FROM_OBJECT_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.DISCOUNT_AC_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE IG.DISCOUNT IS NOT NULL \
	AND IG.ACTIVE = 1 \
	AND OTO.OR_TYPE_ID = 24001 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 29 \
	AND AI.COMPANY_ID = IN_COMPANY_ID
APInvoice29.sql.bs=AND AI.GL_DATE <= IN_AS_OF_DATE \
	AND FW.IS_COMPLETE = 1
APInvoice29.sql.is=AND AI.GL_DATE BETWEEN IN_DATE_FROM AND IN_DATE_TO \
	AND FW.IS_COMPLETE = 1