
# Description: Transfer Receipt workflow and inventory report configuration

RTransferReceipt1.typeId=1
RTransferReceipt1.form=retailTransferReceipt/1/viewForm
RTransferReceipt1.edit=r_transferReceipt_edit
RTransferReceipt1.print=retailTransferReceiptPDF/1/pdf
RTransferReceipt1.service=eulap.eb.service.RTransferReceiptService
RTransferReceipt1.oo.parent_to_child=1
RTransferReceipt1.oo.child_to_child=8
RTransferReceipt1.flow=1;2
RTransferReceipt1.1.statusId=1
RTransferReceipt1.1.next=2
RTransferReceipt1.1.product_code=139
RTransferReceipt1.1.module_code=8
RTransferReceipt1.2.statusId=8
RTransferReceipt1.2.required=1
RTransferReceipt1.2.next=0
RTransferReceipt1.2.product_code=139
RTransferReceipt1.2.module_code=16
RTransferReceipt1.sql.inv.entries=1;2
RTransferReceipt1.sql.1.inv=SELECT 'TRANSFER RECEIPT FROM' AS SOURCE, TR.WAREHOUSE_FROM_ID AS WAREHOUSE_ID, \
	TRI.ITEM_ID AS ITEM_ID, I.STOCK_CODE AS STOCK_CODE, I.DESCRIPTION AS DESCRIPTION, \
	I.ITEM_CATEGORY_ID AS ITEM_CATEGORY_ID, I.UNIT_MEASUREMENT_ID as UNIT_MEASUREMENT_ID, 0 AS IN_QUANTITY, \
	TRI.QUANTITY AS OUT_QUANTITY, 0 AS IN_UNIT_COST, TRI.UNIT_COST AS OUT_UNIT_COST, 0 AS IN_TOTAL_COST, \
	(TRI.UNIT_COST * TRI.QUANTITY) AS OUT_TOTAL_COST, TR.TR_DATE AS DATE, TR.CREATED_DATE, \
	FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, I.ACTIVE, CONCAT('TR-FROM ', TR.TR_NUMBER) AS REFERENCE_NUMBER, \
	'' AS INVOICE_NUMBER , W.NAME AS TRANS_DESCRIPTION, 0.0 AS SRP, \
	TR.EB_OBJECT_ID as PARENT_EB_OBJECT_ID, TRI.EB_OBJECT_ID as EB_OBJECT_ID \
	FROM R_TRANSFER_RECEIPT_ITEM TRI \
	INNER JOIN R_TRANSFER_RECEIPT TR ON TR.R_TRANSFER_RECEIPT_ID = TRI.R_TRANSFER_RECEIPT_ID \
	INNER JOIN FORM_WORKFLOW FW ON FW.FORM_WORKFLOW_ID = TR.FORM_WORKFLOW_ID \
	INNER JOIN ITEM I ON I.ITEM_ID = TRI.ITEM_ID \
	INNER JOIN WAREHOUSE W ON W.WAREHOUSE_ID = TR.WAREHOUSE_FROM_ID \
	WHERE TR.TRANSFER_RECEIPT_TYPE_ID = 1 \
	AND TR.COMPANY_ID = IN_COMPANY_ID \
	AND IF(IN_WAREHOUSE_ID != -1, TR.WAREHOUSE_FROM_ID = IN_WAREHOUSE_ID, TR.WAREHOUSE_FROM_ID != IN_WAREHOUSE_ID)
RTransferReceipt1.sql.2.inv=SELECT 'TRANSFER RECEIPT TO' AS SOURCE, TR.WAREHOUSE_TO_ID AS WAREHOUSE_ID, \
	TRI.ITEM_ID AS ITEM_ID, I.STOCK_CODE AS STOCK_CODE, I.DESCRIPTION AS DESCRIPTION, \
	I.ITEM_CATEGORY_ID AS ITEM_CATEGORY_ID, I.UNIT_MEASUREMENT_ID as UNIT_MEASUREMENT_ID, TRI.QUANTITY AS IN_QUANTITY, \
	0 AS OUT_QUANTITY, TRI.UNIT_COST AS IN_UNIT_COST, 0 AS OUT_UNIT_COST, \
	(TRI.UNIT_COST * TRI.QUANTITY) AS IN_TOTAL_COST, 0 AS OUT_TOTAL_COST, TR.TR_DATE AS DATE, TR.CREATED_DATE, \
	FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, I.ACTIVE, CONCAT('TR-TO ', TR.TR_NUMBER) AS REFERENCE_NUMBER, \
	'' AS INVOICE_NUMBER , W.NAME AS TRANS_DESCRIPTION, 0.0 AS SRP, \
	TR.EB_OBJECT_ID as PARENT_EB_OBJECT_ID, TRI.EB_OBJECT_ID as EB_OBJECT_ID \
	FROM R_TRANSFER_RECEIPT_ITEM TRI \
	INNER JOIN R_TRANSFER_RECEIPT TR ON TR.R_TRANSFER_RECEIPT_ID = TRI.R_TRANSFER_RECEIPT_ID \
	INNER JOIN FORM_WORKFLOW FW ON FW.FORM_WORKFLOW_ID = TR.FORM_WORKFLOW_ID \
	INNER JOIN ITEM I ON I.ITEM_ID = TRI.ITEM_ID \
	INNER JOIN WAREHOUSE W ON W.WAREHOUSE_ID = TR.WAREHOUSE_TO_ID \
	WHERE TR.TRANSFER_RECEIPT_TYPE_ID = 1 \
	AND TR.COMPANY_ID = IN_COMPANY_ID \
	AND IF(IN_WAREHOUSE_ID != -1, TR.WAREHOUSE_TO_ID = IN_WAREHOUSE_ID, TR.WAREHOUSE_TO_ID != IN_WAREHOUSE_ID)
RTransferReceipt1.sql.inv.as=AND FW.IS_COMPLETE = 1 \
	AND TRI.ITEM_ID = IN_ITEM_ID \
	AND TR.TR_DATE <= IN_DATE
RTransferReceipt1.sql.inv.rsf=AND FW.IS_COMPLETE = 1 \
	AND TRI.ITEM_ID = IN_ITEM_ID \
	AND TR.TR_DATE > IN_DATE
RTransferReceipt1.sql.inv.il=AND TR.TR_DATE <= IN_DATE \
	AND IF(IN_ITEM_CATEGORY_ID != -1, I.ITEM_CATEGORY_ID = IN_ITEM_CATEGORY_ID, I.ITEM_CATEGORY_ID != 0) \
	AND IF(IN_IS_ACTIVE != -1, I.ACTIVE = IN_IS_ACTIVE, I.ACTIVE != IN_IS_ACTIVE ) \
	AND CASE WHEN IN_STATUS = -1 THEN FW.CURRENT_STATUS_ID != 4 WHEN IN_STATUS = 1 THEN FW.IS_COMPLETE = 1 END
RTransferReceipt1.sql.inv.sc=AND FW.IS_COMPLETE = 1 \
	AND TRI.ITEM_ID = IN_ITEM_ID \
	AND TR.TR_DATE BETWEEN IN_START_DATE AND IN_END_DATE
RTransferReceipt1.sql.inv.ft=AND FW.IS_COMPLETE = 1 \
	AND TRI.ITEM_ID = IN_ITEM_ID \
	AND TR.TR_DATE > IN_AS_OF_DATE