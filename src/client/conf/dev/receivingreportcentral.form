
# Description: Receiving Report workfow and journal entries configuration

APInvoice13.typeId=1
APInvoice13.form=retailReceivingReport/13/form/viewForm
APInvoice13.edit=rr_central_edit
APInvoice13.print=retailReceivingReportPDF/13/pdf
APInvoice13.service=eulap.eb.service.RReceivingReportService
APInvoice13.oo.parent_to_child=1
APInvoice13.oo.child_to_child=13
#APInvoice13.acct_transaction_types=2
APInvoice13.flow=1;2
APInvoice13.1.statusId=31
APInvoice13.1.required=
APInvoice13.1.next=2
APInvoice13.1.product_code=24010
APInvoice13.1.module_code=8
APInvoice13.2.statusId=1
APInvoice13.2.required=1
APInvoice13.2.next=0
APInvoice13.2.product_code=24010
APInvoice13.2.module_code=16
APInvoice13.sql.entries=1;2;3;4;5;6
# -- Receiving Report - Items - Debit
APInvoice13.sql.1.je=SELECT 'RECEIVING REPORT - CENTRAL' AS SOURCE, AI.AP_INVOICE_ID as ID, AC.COMPANY_ID, AC.DIVISION_ID, AC.ACCOUNT_ID, \
	D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('RR ', AI.SEQUENCE_NO) as REFERENCE_NUMBER, COALESCE(AI.INVOICE_NUMBER, RR.DELIVERY_RECEIPT_NO) as DESCRIPTION, \
	RRI.AMOUNT as DEBIT, 0 as CREDIT, FW.FORM_WORKFLOW_ID, \
	FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM R_RECEIVING_REPORT_ITEM RRI \
	INNER JOIN R_RECEIVING_REPORT RR ON RR.AP_INVOICE_ID = RRI.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = RRI.AP_INVOICE_ID \
	INNER JOIN ITEM I ON I.ITEM_ID = RRI.ITEM_ID \
	INNER JOIN ITEM_CATEGORY_ACCOUNT_SETUP ICAS ON I.ITEM_CATEGORY_ID = ICAS.ITEM_CATEGORY_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON (AC.ACCOUNT_COMBINATION_ID = ICAS.INVENTORY_ACCOUNT AND AC.COMPANY_ID = RR.COMPANY_ID) \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE RRI.UNIT_COST > 0 \
	AND ICAS.COMPANY_ID = AC.COMPANY_ID \
	AND AC.DIVISION_ID = AI.DIVISION_ID \
	AND AI.INVOICE_TYPE_ID = 13 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
# -- Receiving Report - AP Lines (Positive) - Debit
APInvoice13.sql.2.je=SELECT 'RECEIVING REPORT - CENTRAL' AS SOURCE, AI.AP_INVOICE_ID as ID, AC.COMPANY_ID, AC.DIVISION_ID, AC.ACCOUNT_ID, \
	D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE as GL_DATE, \
	CONCAT('RR ', AI.SEQUENCE_NO) as REFERENCE_NUMBER, COALESCE(AI.INVOICE_NUMBER, RR.DELIVERY_RECEIPT_NO) AS DESCRIPTION, \
	APL.AMOUNT AS DEBIT, IF(APL.AMOUNT < 0, ABS(APL.AMOUNT), 0) as CREDIT, FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, \
	FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE_LINE APL \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = APL.AP_INVOICE_ID \
	INNER JOIN R_RECEIVING_REPORT RR ON RR.AP_INVOICE_ID = APL.AP_INVOICE_ID \
	INNER JOIN AP_LINE_SETUP ALS ON ALS.AP_LINE_SETUP_ID = APL.AP_LINE_SETUP_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = ALS.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 13 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
# -- Receiving Report - Serial Items - Debit
APInvoice13.sql.3.je=SELECT 'RECEIVING REPORT - CENTRAL' as SOURCE, AI.AP_INVOICE_ID as ID, AC.COMPANY_ID, AC.DIVISION_ID, AC.ACCOUNT_ID, \
	D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('RR ', AI.SEQUENCE_NO) as REFERENCE_NUMBER, COALESCE(AI.INVOICE_NUMBER, RR.DELIVERY_RECEIPT_NO) as DESCRIPTION, \
	SI.AMOUNT as DEBIT, 0 as CREDIT, FW.FORM_WORKFLOW_ID, \
	FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM SERIAL_ITEM SI \
	INNER JOIN OBJECT_TO_OBJECT OTO ON OTO.TO_OBJECT_ID = SI.EB_OBJECT_ID \
	INNER JOIN AP_INVOICE AI ON AI.EB_OBJECT_ID = OTO.FROM_OBJECT_ID \
	INNER JOIN R_RECEIVING_REPORT RR ON RR.AP_INVOICE_ID = AI.AP_INVOICE_ID \
	INNER JOIN ITEM I ON I.ITEM_ID = SI.ITEM_ID \
	INNER JOIN ITEM_CATEGORY IC ON IC.ITEM_CATEGORY_ID = I.ITEM_CATEGORY_ID \
	INNER JOIN ITEM_CATEGORY_ACCOUNT_SETUP ICAS ON I.ITEM_CATEGORY_ID = ICAS.ITEM_CATEGORY_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON (AC.ACCOUNT_COMBINATION_ID = ICAS.INVENTORY_ACCOUNT AND AC.COMPANY_ID = AI.COMPANY_ID) \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE OTO.OR_TYPE_ID = 64 \
	AND SI.UNIT_COST > 0 \
	AND AI.INVOICE_TYPE_ID = 13 \
	AND SI.ACTIVE = 1 \
	AND ICAS.COMPANY_ID = AC.COMPANY_ID \
	AND AC.DIVISION_ID = AI.DIVISION_ID \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
# -- Receiving Report - Items - Credit
APInvoice13.sql.4.je=SELECT 'RECEIVING REPORT - CENTRAL' AS SOURCE, AI.AP_INVOICE_ID as ID, AC.COMPANY_ID, AC.DIVISION_ID, AC.ACCOUNT_ID, \
	D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('RR ', AI.SEQUENCE_NO) as REFERENCE_NUMBER, COALESCE(AI.INVOICE_NUMBER, RR.DELIVERY_RECEIPT_NO) as DESCRIPTION, \
	0 as DEBIT, RRI.AMOUNT as CREDIT, FW.FORM_WORKFLOW_ID, \
	FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM R_RECEIVING_REPORT_ITEM RRI \
	INNER JOIN R_RECEIVING_REPORT RR ON RR.AP_INVOICE_ID = RRI.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = RR.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE AI.INVOICE_TYPE_ID = 13 \
	AND RRI.UNIT_COST > 0 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
# -- Receiving Report - AP Lines - Credit
APInvoice13.sql.5.je=SELECT 'RECEIVING REPORT - CENTRAL' AS SOURCE, AI.AP_INVOICE_ID as ID, AC.COMPANY_ID, AC.DIVISION_ID, AC.ACCOUNT_ID, \
	D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE as GL_DATE, \
	CONCAT('RR ', AI.SEQUENCE_NO) as REFERENCE_NUMBER, COALESCE(AI.INVOICE_NUMBER, RR.DELIVERY_RECEIPT_NO) AS DESCRIPTION, \
	IF(APL.AMOUNT < 0, ABS(APL.AMOUNT), 0) AS DEBIT, APL.AMOUNT AS CREDIT, FW.FORM_WORKFLOW_ID, \
	FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE_LINE APL \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = APL.AP_INVOICE_ID \
	INNER JOIN R_RECEIVING_REPORT RR ON RR.AP_INVOICE_ID = APL.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 13 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
# -- Receiving Report - Serial Items - Credit
APInvoice13.sql.6.je=SELECT 'RECEIVING REPORT - CENTRAL' AS SOURCE, AI.AP_INVOICE_ID as ID, AC.COMPANY_ID, AC.DIVISION_ID, AC.ACCOUNT_ID, \
	D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, \
	CONCAT('RR ', AI.SEQUENCE_NO) as REFERENCE_NUMBER, COALESCE(AI.INVOICE_NUMBER, RR.DELIVERY_RECEIPT_NO) as DESCRIPTION, \
	0 as DEBIT, SI.AMOUNT as CREDIT, FW.FORM_WORKFLOW_ID, \
	FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM SERIAL_ITEM SI \
	INNER JOIN OBJECT_TO_OBJECT OTO ON OTO.TO_OBJECT_ID = SI.EB_OBJECT_ID \
	INNER JOIN AP_INVOICE AI ON AI.EB_OBJECT_ID = OTO.FROM_OBJECT_ID \
	INNER JOIN R_RECEIVING_REPORT RR ON RR.AP_INVOICE_ID = AI.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE OTO.OR_TYPE_ID = 64 \
	AND SI.UNIT_COST > 0 \
	AND SI.ACTIVE = 1 \
	AND AI.INVOICE_TYPE_ID = 13 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
APInvoice13.sql.je.jerr=AND AI.GL_DATE BETWEEN DATE_FROM AND DATE_TO \
	AND (CASE WHEN IN_REFERENCE_NUMBER NOT LIKE '-1' THEN CONCAT('RR ', AI.SEQUENCE_NO) LIKE IN_REFERENCE_NUMBER \
		ELSE IN_REFERENCE_NUMBER LIKE IN_REFERENCE_NUMBER END) \
	AND (CASE IN_SOURCE WHEN 'RECEIVING REPORT - CENTRAL' THEN AI.AP_INVOICE_ID != 0 \
		WHEN 'ALL' THEN AI.AP_INVOICE_ID != 0 \
		ELSE AI.AP_INVOICE_ID = 0 END) \
	AND (CASE WHEN IN_IS_POSTED != -1 THEN FW.IS_COMPLETE = IN_IS_POSTED ELSE FW.IS_COMPLETE != IN_IS_POSTED END)
APInvoice13.sql.je.ab=AND IF(DATE_FROM IS NOT NULL, AI.GL_DATE BETWEEN DATE_FROM AND DATE_TO, AI.GL_DATE <= DATE_TO) \
	AND IF(IN_DIVISION_ID != -1, AI.DIVISION_ID = IN_DIVISION_ID, AI.DIVISION_ID != IN_DIVISION_ID) \
	AND FW.IS_COMPLETE = 1
APInvoice13.sql.je.aa=AND D.NUMBER BETWEEN IN_FROM_DIVISION AND IN_TO_DIVISION \
	AND AC.ACCOUNT_ID = IN_ACCOUNT_ID \
	AND AI.GL_DATE BETWEEN DATE_FROM AND DATE_TO \
	AND (AI.INVOICE_NUMBER LIKE IN_DESCRIPTION OR RR.DELIVERY_RECEIPT_NO LIKE IN_DESCRIPTION) \
	AND FW.IS_COMPLETE = 1
APInvoice13.sql.je.gll=AND AC.ACCOUNT_ID = IN_ACCOUNT_ID \
	AND AI.GL_DATE BETWEEN DATE_FROM AND DATE_TO \
	AND FW.IS_COMPLETE = 1
# Configuration for IS and BS by division
# -- Receiving Report - Items - Debit
APInvoice13.sql.1.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	RRI.AMOUNT as DEBIT, 0 as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM R_RECEIVING_REPORT_ITEM RRI \
	INNER JOIN R_RECEIVING_REPORT RR ON RR.AP_INVOICE_ID = RRI.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = RRI.AP_INVOICE_ID \
	INNER JOIN ITEM I ON I.ITEM_ID = RRI.ITEM_ID \
	INNER JOIN ITEM_CATEGORY_ACCOUNT_SETUP ICAS ON I.ITEM_CATEGORY_ID = ICAS.ITEM_CATEGORY_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON (AC.ACCOUNT_COMBINATION_ID = ICAS.INVENTORY_ACCOUNT AND AC.COMPANY_ID = RR.COMPANY_ID) \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE RRI.UNIT_COST > 0 \
	AND ICAS.COMPANY_ID = AC.COMPANY_ID \
	AND AC.DIVISION_ID = AI.DIVISION_ID \
	AND AI.INVOICE_TYPE_ID = 13 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
# -- Receiving Report - AP Lines (Positive) - Debit
APInvoice13.sql.2.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	APL.AMOUNT AS DEBIT, IF(APL.AMOUNT < 0, ABS(APL.AMOUNT), 0) as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM AP_INVOICE_LINE APL \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = APL.AP_INVOICE_ID \
	INNER JOIN R_RECEIVING_REPORT RR ON RR.AP_INVOICE_ID = APL.AP_INVOICE_ID \
	INNER JOIN AP_LINE_SETUP ALS ON ALS.AP_LINE_SETUP_ID = APL.AP_LINE_SETUP_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = ALS.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 13 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
# -- Receiving Report - Serial Items - Debit
APInvoice13.sql.3.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	SI.AMOUNT as DEBIT, 0 as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM SERIAL_ITEM SI \
	INNER JOIN OBJECT_TO_OBJECT OTO ON OTO.TO_OBJECT_ID = SI.EB_OBJECT_ID \
	INNER JOIN AP_INVOICE AI ON AI.EB_OBJECT_ID = OTO.FROM_OBJECT_ID \
	INNER JOIN R_RECEIVING_REPORT RR ON RR.AP_INVOICE_ID = AI.AP_INVOICE_ID \
	INNER JOIN ITEM I ON I.ITEM_ID = SI.ITEM_ID \
	INNER JOIN ITEM_CATEGORY IC ON IC.ITEM_CATEGORY_ID = I.ITEM_CATEGORY_ID \
	INNER JOIN ITEM_CATEGORY_ACCOUNT_SETUP ICAS ON I.ITEM_CATEGORY_ID = ICAS.ITEM_CATEGORY_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON (AC.ACCOUNT_COMBINATION_ID = ICAS.INVENTORY_ACCOUNT AND AC.COMPANY_ID = AI.COMPANY_ID) \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE OTO.OR_TYPE_ID = 64 \
	AND SI.UNIT_COST > 0 \
	AND AI.INVOICE_TYPE_ID = 13 \
	AND SI.ACTIVE = 1 \
	AND ICAS.COMPANY_ID = AC.COMPANY_ID \
	AND AC.DIVISION_ID = AI.DIVISION_ID \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
# -- Receiving Report - Items - Credit
APInvoice13.sql.4.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	0 as DEBIT, RRI.AMOUNT as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM R_RECEIVING_REPORT_ITEM RRI \
	INNER JOIN R_RECEIVING_REPORT RR ON RR.AP_INVOICE_ID = RRI.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = RR.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE AI.INVOICE_TYPE_ID = 13 \
	AND RRI.UNIT_COST > 0 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
# -- Receiving Report - AP Lines - Credit
APInvoice13.sql.5.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	IF(APL.AMOUNT < 0, ABS(APL.AMOUNT), 0) AS DEBIT, APL.AMOUNT AS CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM AP_INVOICE_LINE APL \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = APL.AP_INVOICE_ID \
	INNER JOIN R_RECEIVING_REPORT RR ON RR.AP_INVOICE_ID = APL.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 13 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
# -- Receiving Report - Serial Items - Credit
APInvoice13.sql.6.isbs=SELECT AC.COMPANY_ID, D.NAME AS DIVISION_NAME, D.DIVISION_ID, A.ACCOUNT_NAME, A.ACCOUNT_ID, A.PARENT_ACCOUNT_ID, \
	0 as DEBIT, SI.AMOUNT as CREDIT, A.ACCOUNT_TYPE_ID, A.NUMBER as ACCT_NO, AI.GL_DATE AS DATE \
	FROM SERIAL_ITEM SI \
	INNER JOIN OBJECT_TO_OBJECT OTO ON OTO.TO_OBJECT_ID = SI.EB_OBJECT_ID \
	INNER JOIN AP_INVOICE AI ON AI.EB_OBJECT_ID = OTO.FROM_OBJECT_ID \
	INNER JOIN R_RECEIVING_REPORT RR ON RR.AP_INVOICE_ID = AI.AP_INVOICE_ID \
	INNER JOIN AP_INVOICE_ACCOUNT AIA ON (AIA.COMPANY_ID = AI.COMPANY_ID AND AIA.DIVISION_ID = AI.DIVISION_ID) \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = AIA.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE OTO.OR_TYPE_ID = 64 \
	AND SI.UNIT_COST > 0 \
	AND SI.ACTIVE = 1 \
	AND AI.INVOICE_TYPE_ID = 13 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
APInvoice13.sql.bs=AND AI.GL_DATE <= IN_AS_OF_DATE \
	AND FW.IS_COMPLETE = 1
APInvoice13.sql.is=AND AI.GL_DATE BETWEEN IN_DATE_FROM AND IN_DATE_TO \
	AND FW.IS_COMPLETE = 1
APInvoice13.sql.inv.entries=1;2
APInvoice13.sql.1.inv=SELECT 'RECEIVING REPORT - CENTRAL' AS SOURCE, RR.WAREHOUSE_ID AS WAREHOUSE_ID, RRI.ITEM_ID AS ITEM_ID, I.STOCK_CODE AS STOCK_CODE, \
	I.DESCRIPTION AS DESCRIPTION, I.ITEM_CATEGORY_ID AS ITEM_CATEGORY_ID, I.UNIT_MEASUREMENT_ID as UNIT_MEASUREMENT_ID, RRI.QUANTITY AS IN_QUANTITY,0 as OUT_QUANTITY, \
	RRI.UNIT_COST AS IN_UNIT_COST, 0 as OUT_UNIT_COST, RRI.UNIT_COST * QUANTITY AS IN_TOTAL_COST, 0 AS OUT_TOTAL_COST, \
	API.GL_DATE AS DATE, RR.CREATED_DATE, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, I.ACTIVE, CONCAT('RR ', API.SEQUENCE_NO) as REFERENCE_NUMBER, \
	IF(API.INVOICE_NUMBER != '', API.INVOICE_NUMBER, RR.DELIVERY_RECEIPT_NO) as INVOICE_NUMBER, S.NAME AS TRANS_DESCRIPTION, 0.0 as SRP, \
	API.EB_OBJECT_ID as PARENT_EB_OBJECT_ID, RRI.EB_OBJECT_ID, D.NAME AS DIVISION_NAME, API.BMS_NUMBER, D.DIVISION_ID, COALESCE(ISP.SRP, 0) AS LATEST_SRP, UM.NAME AS UOM_NAME \
	FROM R_RECEIVING_REPORT_ITEM RRI \
	INNER JOIN AP_INVOICE API ON RRI.AP_INVOICE_ID = API.AP_INVOICE_ID \
	INNER JOIN DIVISION D ON API.DIVISION_ID = D.DIVISION_ID \
	INNER JOIN R_RECEIVING_REPORT RR ON API.AP_INVOICE_ID = RR.AP_INVOICE_ID \
	INNER JOIN FORM_WORKFLOW FW ON API.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	INNER JOIN ITEM I ON RRI.ITEM_ID = I.ITEM_ID \
	LEFT JOIN ITEM_SRP ISP ON ISP.ITEM_ID = I.ITEM_ID AND ISP.ACTIVE = 1 \
	INNER JOIN UNIT_MEASUREMENT UM ON UM.UNITOFMEASUREMENT_ID = I.UNIT_MEASUREMENT_ID \
	INNER JOIN SUPPLIER S ON S.SUPPLIER_ID = API.SUPPLIER_ID \
	WHERE RR.COMPANY_ID = IN_COMPANY_ID \
	AND API.INVOICE_TYPE_ID = 13
APInvoice13.sql.2.inv=SELECT 'RECEIVING REPORT - CENTRAL' AS SOURCE, RR.WAREHOUSE_ID AS WAREHOUSE_ID, RRI.ITEM_ID AS ITEM_ID, I.STOCK_CODE AS STOCK_CODE, \
	I.DESCRIPTION AS DESCRIPTION, I.ITEM_CATEGORY_ID AS ITEM_CATEGORY_ID, I.UNIT_MEASUREMENT_ID as UNIT_MEASUREMENT_ID, RRI.QUANTITY AS IN_QUANTITY,0 as OUT_QUANTITY, \
	RRI.UNIT_COST AS IN_UNIT_COST, 0 as OUT_UNIT_COST, RRI.UNIT_COST * QUANTITY AS IN_TOTAL_COST, 0 AS OUT_TOTAL_COST, \
	API.GL_DATE AS DATE, RR.CREATED_DATE, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, I.ACTIVE, CONCAT('RR ', API.SEQUENCE_NO) as REFERENCE_NUMBER, \
	IF(API.INVOICE_NUMBER != '', API.INVOICE_NUMBER, RR.DELIVERY_RECEIPT_NO) as INVOICE_NUMBER, S.NAME AS TRANS_DESCRIPTION, 0.0 as SRP, \
	API.EB_OBJECT_ID as PARENT_EB_OBJECT_ID, RRI.EB_OBJECT_ID, D.NAME AS DIVISION_NAME, API.BMS_NUMBER, D.DIVISION_ID, COALESCE(ISP.SRP, 0) AS LATEST_SRP, UM.NAME AS UOM_NAME \
	FROM SERIAL_ITEM RRI \
	INNER JOIN ITEM I ON RRI.ITEM_ID = I.ITEM_ID \
	LEFT JOIN ITEM_SRP ISP ON ISP.ITEM_ID = I.ITEM_ID AND ISP.ACTIVE = 1 \
	INNER JOIN UNIT_MEASUREMENT UM ON UM.UNITOFMEASUREMENT_ID = I.UNIT_MEASUREMENT_ID \
	INNER JOIN OBJECT_TO_OBJECT OTO ON OTO.TO_OBJECT_ID = RRI.EB_OBJECT_ID \
	INNER JOIN AP_INVOICE API ON API.EB_OBJECT_ID = OTO.FROM_OBJECT_ID \
	INNER JOIN DIVISION D ON API.DIVISION_ID = D.DIVISION_ID \
	INNER JOIN R_RECEIVING_REPORT RR ON RR.AP_INVOICE_ID = API.AP_INVOICE_ID \
	INNER JOIN SUPPLIER S ON S.SUPPLIER_ID = API.SUPPLIER_ID \
	INNER JOIN FORM_WORKFLOW FW ON API.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE RR.COMPANY_ID = IN_COMPANY_ID \
	AND RRI.ACTIVE = 1 \
	AND OTO.OR_TYPE_ID = 64 \
	AND API.INVOICE_TYPE_ID = 13
APInvoice13.sql.inv.as=AND FW.IS_COMPLETE = 1 \
	AND RRI.ITEM_ID = IN_ITEM_ID \
	AND RR.WAREHOUSE_ID = IN_WAREHOUSE_ID \
	AND API.GL_DATE <= IN_DATE
APInvoice13.sql.inv.rsf=AND FW.IS_COMPLETE = 1 \
	AND RRI.ITEM_ID = IN_ITEM_ID \
	AND RR.WAREHOUSE_ID = IN_WAREHOUSE_ID \
	AND API.GL_DATE > IN_DATE
APInvoice13.sql.inv.il=AND API.GL_DATE <= IN_DATE \
	AND IF(IN_ITEM_CATEGORY_ID != -1, I.ITEM_CATEGORY_ID = IN_ITEM_CATEGORY_ID, I.ITEM_CATEGORY_ID != 0) \
	AND IF(IN_WAREHOUSE_ID != -1, RR.WAREHOUSE_ID = IN_WAREHOUSE_ID, RR.WAREHOUSE_ID != IN_WAREHOUSE_ID) \
	AND IF(IN_IS_ACTIVE != -1, I.ACTIVE = IN_IS_ACTIVE, I.ACTIVE != IN_IS_ACTIVE ) \
	AND IF(IN_DIVISION_ID != -1, API.DIVISION_ID = IN_DIVISION_ID, API.DIVISION_ID != IN_DIVISION_ID) \
	AND CASE WHEN IN_STATUS = -1 THEN FW.CURRENT_STATUS_ID != 4 \
		WHEN IN_STATUS = 1 THEN FW.IS_COMPLETE = 1 END
APInvoice13.sql.inv.sc=AND FW.IS_COMPLETE = 1 \
	AND RRI.ITEM_ID = IN_ITEM_ID \
	AND API.GL_DATE BETWEEN IN_START_DATE AND IN_END_DATE \
	AND RR.WAREHOUSE_ID = IN_WAREHOUSE_ID \
	AND API.DIVISION_ID = IN_DIVISION_ID
APInvoice13.sql.inv.ft=AND FW.IS_COMPLETE = 1 \
	AND RRI.ITEM_ID = IN_ITEM_ID \
	AND RR.WAREHOUSE_ID = IN_WAREHOUSE_ID \
	AND API.GL_DATE > IN_AS_OF_DATE
