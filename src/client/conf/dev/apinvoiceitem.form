
# Description	: AP Invoice - Item form workflow and report configuration

APInvoice10.typeId=1
APInvoice10.form=apInvoiceItem/10/view
APInvoice10.edit=ap_invoice_item_edit
APInvoice10.print=apInvoiceItem/10/print
APInvoice10.service=eulap.eb.service.ApInvoiceItemService
APInvoice10.acct_transaction_types=2
APInvoice10.oo.parent_to_child=1
APInvoice10.flow=1;2
APInvoice10.1.statusId=1
APInvoice10.1.required=
APInvoice10.1.next=2
APInvoice10.1.product_code=40018
APInvoice10.1.module_code=8
APInvoice10.2.statusId=24
APInvoice10.2.required=1
APInvoice10.2.next=0
APInvoice10.2.product_code=40018
APInvoice10.2.module_code=16
APInvoice10.sql.entries=1;2;3;4
#	AP Invoice (AP invoice items) - Debit
APInvoice10.sql.1.je=SELECT 'AP INVOICE - GOODS' as SOURCE, AI.AP_INVOICE_ID as ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, \
	A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, AI.INVOICE_NUMBER as REFERENCE_NUMBER, AI.DESCRIPTION, \
	IF(AL.AMOUNT > 0, AL.AMOUNT, 0) AS DEBIT, IF(AL.AMOUNT < 0, ABS(AL.AMOUNT), 0) as CREDIT, \
	FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE_ITEM AL \
	INNER JOIN OBJECT_TO_OBJECT OTO ON OTO.TO_OBJECT_ID = AL.EB_OBJECT_ID \
	INNER JOIN AP_INVOICE AI ON AI.EB_OBJECT_ID = OTO.FROM_OBJECT_ID \
	INNER JOIN SUPPLIER_ACCOUNT SA ON SA.SUPPLIER_ACCOUNT_ID = AI.SUPPLIER_ACCOUNT_ID \
	INNER JOIN AP_INVOICE_ACCOUNT TA ON TA.COMPANY_ID = SA.COMPANY_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = TA.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE AL.ACTIVE = 1 \
	AND AI.INVOICE_TYPE_ID = 10 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND TA.COMPANY_ID = IN_COMPANY_ID
# AP Invoice (Other Charges) - Debit
APInvoice10.sql.2.je=SELECT 'AP INVOICE - GOODS' AS SOURCE, AI.AP_INVOICE_ID AS ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, \
	A.NUMBER AS ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE AS GL_DATE, AI.INVOICE_NUMBER as REFERENCE_NUMBER, AI.DESCRIPTION, \
	IF(APL.AMOUNT > 0, APL.AMOUNT, 0) AS DEBIT, IF(APL.AMOUNT < 0, ABS(APL.AMOUNT), 0) AS CREDIT, \
	FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE AS IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE_LINE APL \
	INNER JOIN AP_INVOICE AI ON AI.AP_INVOICE_ID = APL.AP_INVOICE_ID \
	INNER JOIN AP_LINE_SETUP ALS ON ALS.AP_LINE_SETUP_ID = APL.AP_LINE_SETUP_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = ALS.ACCOUNT_COMBINATION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AI.INVOICE_TYPE_ID = 10 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
#	AP Invoice (Withholding tax) - Credit
APInvoice10.sql.3.je=SELECT 'AP INVOICE - GOODS' as SOURCE, AI.AP_INVOICE_ID as ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, \
	A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, AI.INVOICE_NUMBER as REFERENCE_NUMBER, AI.DESCRIPTION, \
	IF(AI.WT_AMOUNT < 0, ABS(AI.WT_AMOUNT), 0) as DEBIT, IF(AI.WT_AMOUNT > 0, AI.WT_AMOUNT, 0) as CREDIT, \
	FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE AI \
	INNER JOIN WT_ACCOUNT_SETTING WTAS ON WTAS.WT_ACCOUNT_SETTING_ID = AI.WT_ACCOUNT_SETTING_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = WTAS.ACCOUNT_COMBINATION_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE AI.INVOICE_TYPE_ID = 10 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = IN_COMPANY_ID
#	AP Invoice (Supplier default credit account) - Credit
APInvoice10.sql.4.je=SELECT 'AP INVOICE - GOODS' as SOURCE, AI.AP_INVOICE_ID as ID, AC.COMPANY_ID, AC.DIVISION_ID, \
	AC.ACCOUNT_ID, D.NUMBER AS DIVISION_NO, D.NAME AS DIVISION_NAME, \
	A.NUMBER as ACCT_NO, A.ACCOUNT_NAME, AI.GL_DATE, AI.INVOICE_NUMBER as REFERENCE_NUMBER, AI.DESCRIPTION, \
	IF(AI.AMOUNT < 0, ABS(AI.AMOUNT), 0) as DEBIT, IF(AI.AMOUNT > 0, AI.AMOUNT, 0) as CREDIT, \
	FW.FORM_WORKFLOW_ID, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, FW.IS_COMPLETE as IS_POSTED, '' AS CUSTOMER_PO_NO, A.ACCOUNT_TYPE_ID \
	FROM AP_INVOICE AI \
	INNER JOIN SUPPLIER_ACCOUNT SA ON SA.SUPPLIER_ACCOUNT_ID = AI.SUPPLIER_ACCOUNT_ID \
	INNER JOIN ACCOUNT_COMBINATION AC ON AC.ACCOUNT_COMBINATION_ID = SA.DEFAULT_CREDIT_AC_ID \
	INNER JOIN DIVISION D ON D.DIVISION_ID = AC.DIVISION_ID \
	INNER JOIN ACCOUNT A ON A.ACCOUNT_ID = AC.ACCOUNT_ID \
	INNER JOIN FORM_WORKFLOW FW ON AI.FORM_WORKFLOW_ID = FW.FORM_WORKFLOW_ID \
	WHERE AI.INVOICE_TYPE_ID = 10 \
	AND FW.CURRENT_STATUS_ID != 4 \
	AND AC.COMPANY_ID = SA.COMPANY_ID \
	AND AC.COMPANY_ID = IN_COMPANY_ID
APInvoice10.sql.je.jerr=AND AI.GL_DATE BETWEEN DATE_FROM AND DATE_TO \
	AND (CASE WHEN IN_REFERENCE_NUMBER NOT LIKE '-1' THEN AI.INVOICE_NUMBER LIKE IN_REFERENCE_NUMBER \
		ELSE IN_REFERENCE_NUMBER LIKE IN_REFERENCE_NUMBER END) \
	AND (CASE IN_SOURCE WHEN 'AP INVOICE - GOODS' THEN AI.AP_INVOICE_ID != 0 \
		WHEN 'ALL' THEN AI.AP_INVOICE_ID != 0 \
		ELSE AI.AP_INVOICE_ID = 0 END) \
	AND (CASE WHEN IN_IS_POSTED != -1 THEN FW.IS_COMPLETE = IN_IS_POSTED ELSE FW.IS_COMPLETE != IN_IS_POSTED END)
APInvoice10.sql.je.ab=AND AI.GL_DATE <= IN_AS_OF_DATE \
	AND FW.IS_COMPLETE = 1
APInvoice10.sql.je.aa=AND D.NUMBER BETWEEN IN_FROM_DIVISION AND IN_TO_DIVISION \
	AND AC.ACCOUNT_ID = IN_ACCOUNT_ID \
	AND AI.GL_DATE BETWEEN DATE_FROM AND DATE_TO \
	AND FW.IS_COMPLETE = 1