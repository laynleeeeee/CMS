
#Description: Repacking workflow and inventory report configuration

Repacking1.typeId=1
Repacking1.form=repacking/1/viewForm
Repacking1.edit=repacking_edit
Repacking1.print=repackingJr/1/pdf
Repacking1.service=eulap.eb.service.RepackingService
Repacking1.oo.parent_to_child=1
Repacking1.flow=1;2
Repacking1.1.statusId=1
Repacking1.1.required=
Repacking1.1.next=2
Repacking1.1.product_code=98
Repacking1.1.module_code=8
Repacking1.2.statusId=8
Repacking1.2.required=1
Repacking1.2.next=0
Repacking1.2.product_code=98
Repacking1.2.module_code=16
Repacking1.sql.inv.entries=1;2
Repacking1.sql.1.inv=SELECT SOURCE, WAREHOUSE_ID, ITEM_ID, STOCK_CODE, DESCRIPTION, ITEM_CATEGORY_ID, UNIT_MEASUREMENT_ID, IN_QUANTITY, \
	OUT_QUANTITY, IN_UNIT_COST, OUT_UNIT_COST, IN_TOTAL_COST, OUT_TOTAL_COST, DATE, CREATED_DATE, CURRENT_STATUS_ID, IS_COMPLETE, ACTIVE, \
	REFERENCE_NUMBER, INVOICE_NUMBER, TRANS_DESCRIPTION, SRP, PARENT_EB_OBJECT_ID, EB_OBJECT_ID FROM ( \
	SELECT 'REPACKING FROM' AS SOURCE, RP.WAREHOUSE_ID AS WAREHOUSE_ID, RPI.FROM_ITEM_ID AS ITEM_ID, \
	I.STOCK_CODE AS STOCK_CODE, I.DESCRIPTION AS DESCRIPTION, I.ITEM_CATEGORY_ID AS ITEM_CATEGORY_ID, \
	I.UNIT_MEASUREMENT_ID as UNIT_MEASUREMENT_ID, 0 AS IN_QUANTITY, \
	RPI.QUANTITY AS OUT_QUANTITY, 0 AS IN_UNIT_COST, RPI.UNIT_COST AS OUT_UNIT_COST, 0 AS IN_TOTAL_COST, \
	(RPI.UNIT_COST * RPI.QUANTITY) AS OUT_TOTAL_COST, RP.R_DATE AS DATE, RP.CREATED_DATE, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, I.ACTIVE, \
	CONCAT('RP-FROM ', RP.R_NUMBER) AS REFERENCE_NUMBER, '' AS INVOICE_NUMBER , 'REPACKED FROM' AS TRANS_DESCRIPTION, 0.0 AS SRP, \
	RP.EB_OBJECT_ID as PARENT_EB_OBJECT_ID, RPI.EB_OBJECT_ID as EB_OBJECT_ID \
	FROM REPACKING_ITEM RPI \
	INNER JOIN REPACKING RP ON RP.REPACKING_ID = RPI.REPACKING_ID \
	INNER JOIN FORM_WORKFLOW FW ON FW.FORM_WORKFLOW_ID = RP.FORM_WORKFLOW_ID \
	INNER JOIN ITEM I ON I.ITEM_ID = RPI.FROM_ITEM_ID \
	WHERE RP.REPACKING_TYPE_ID = 1 \
	AND RP.COMPANY_ID = IN_COMPANY_ID ) AS REPACKING_FROM_TABLE 
Repacking1.sql.2.inv=SELECT SOURCE, WAREHOUSE_ID, ITEM_ID, STOCK_CODE, DESCRIPTION, ITEM_CATEGORY_ID, UNIT_MEASUREMENT_ID, IN_QUANTITY, \
	OUT_QUANTITY, IN_UNIT_COST, OUT_UNIT_COST, IN_TOTAL_COST, OUT_TOTAL_COST, DATE, CREATED_DATE, CURRENT_STATUS_ID, IS_COMPLETE, ACTIVE, \
	REFERENCE_NUMBER, INVOICE_NUMBER, TRANS_DESCRIPTION, SRP, PARENT_EB_OBJECT_ID, EB_OBJECT_ID FROM ( \
	SELECT 'REPACKING TO' AS SOURCE, RP.WAREHOUSE_ID AS WAREHOUSE_ID, RPI.TO_ITEM_ID AS ITEM_ID, \
	I.STOCK_CODE AS STOCK_CODE, I.DESCRIPTION AS DESCRIPTION, I.ITEM_CATEGORY_ID AS ITEM_CATEGORY_ID, \
	I.UNIT_MEASUREMENT_ID as UNIT_MEASUREMENT_ID, RPI.REPACKED_QUANTITY AS IN_QUANTITY, \
	0 AS OUT_QUANTITY, RPI.REPACKED_UNIT_COST AS IN_UNIT_COST, 0 AS OUT_UNIT_COST, (RPI.REPACKED_UNIT_COST * RPI.REPACKED_QUANTITY) AS IN_TOTAL_COST, \
	0 AS OUT_TOTAL_COST, RP.R_DATE AS DATE, RP.CREATED_DATE, FW.CURRENT_STATUS_ID, FW.IS_COMPLETE, I.ACTIVE, \
	CONCAT('RP-TO ', RP.R_NUMBER) AS REFERENCE_NUMBER, '' AS INVOICE_NUMBER , 'REPACKED TO' AS TRANS_DESCRIPTION, 0.0 AS SRP, \
	RP.EB_OBJECT_ID as PARENT_EB_OBJECT_ID, RPI.EB_OBJECT_ID as EB_OBJECT_ID \
	FROM REPACKING_ITEM RPI \
	INNER JOIN REPACKING RP ON RP.REPACKING_ID = RPI.REPACKING_ID \
	INNER JOIN FORM_WORKFLOW FW ON FW.FORM_WORKFLOW_ID = RP.FORM_WORKFLOW_ID \
	INNER JOIN ITEM I ON I.ITEM_ID = RPI.TO_ITEM_ID \
	WHERE RP.REPACKING_TYPE_ID = 1 \
	AND RP.COMPANY_ID = IN_COMPANY_ID ) AS REPACKING_TO_TABLE 
Repacking1.sql.inv.as=WHERE IS_COMPLETE = 1 \
	AND ITEM_ID = IN_ITEM_ID \
	AND WAREHOUSE_ID = IN_WAREHOUSE_ID \
	AND DATE <= IN_DATE
Repacking1.sql.inv.rsf=WHERE IS_COMPLETE = 1 \
	AND ITEM_ID = IN_ITEM_ID \
	AND WAREHOUSE_ID = IN_WAREHOUSE_ID \
	AND DATE > IN_DATE
Repacking1.sql.inv.il=WHERE DATE <= IN_DATE \
	AND IF(IN_ITEM_CATEGORY_ID != -1, ITEM_CATEGORY_ID = IN_ITEM_CATEGORY_ID, ITEM_CATEGORY_ID != 0) \
	AND IF(IN_WAREHOUSE_ID != -1, WAREHOUSE_ID = IN_WAREHOUSE_ID, WAREHOUSE_ID != IN_WAREHOUSE_ID) \
	AND IF(IN_IS_ACTIVE != -1, ACTIVE = IN_IS_ACTIVE, ACTIVE != IN_IS_ACTIVE ) \
	AND CASE WHEN IN_STATUS = -1 THEN CURRENT_STATUS_ID != 4 WHEN IN_STATUS = 1 THEN IS_COMPLETE = 1 END
Repacking1.sql.inv.sc=WHERE IS_COMPLETE = 1 \
	AND ITEM_ID = IN_ITEM_ID \
	AND WAREHOUSE_ID = IN_WAREHOUSE_ID \
	AND DATE BETWEEN IN_START_DATE AND IN_END_DATE
Repacking1.sql.inv.ft=WHERE IS_COMPLETE = 1 \
	AND ITEM_ID = IN_ITEM_ID \
	AND WAREHOUSE_ID = IN_WAREHOUSE_ID \
	AND DATE > IN_AS_OF_DATE